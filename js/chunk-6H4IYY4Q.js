import{J as Y,N as q,O as S,W as H,b as C,d as y,g as O,h as _,i as Q,j,l as T,o as L,q as z,s as P,u as D}from"./chunk-D2C5I5KB.js";import{a as X}from"./chunk-PMT4A7EC.js";import{c as k}from"./chunk-K7QPVK44.js";k();var G=(t,i,c,p)=>{let l,m="none";switch(i){case 0:l={opacity:[1,0]};break;case 1:l={opacity:[0,1]},m="block";break;case"bounceUpIn":l={begin(s){T(t,"block")},translateY:[{value:-60,duration:200},{value:10,duration:200},{value:-5,duration:200},{value:0,duration:200}],opacity:[0,1]},m="block";break;case"shrinkIn":l={begin(s){T(t,"block")},scale:[{value:1.1,duration:300},{value:1,duration:200}],opacity:1},m="block";break;case"slideRightIn":l={begin(s){T(t,"block")},translateX:["100%","0%"],opacity:[0,1]},m="block";break;case"slideRightOut":l={translateX:["0%","100%"],opacity:[1,0]};break;default:l=i,m=i.display;break}X(Object.assign({targets:t,duration:200,easing:"linear",begin(){p&&p()},complete(){T(t,m),c&&c()}},l)).play()},E=(t,i,c)=>{X({targets:typeof i=="number"&&typeof t!="number"?t.parentNode:document.scrollingElement,duration:500,easing:"easeInOutQuad",scrollTop:i||(typeof t=="number"?t:t?Q(t)+document.documentElement.scrollTop-Y:0),complete(){c&&c()}}).play()};k(),k();var g={set(t,i){localStorage.setItem(t,i)},get(t){return localStorage.getItem(t)},del(t){localStorage.removeItem(t)}},$=t=>{if(!t)return;let i=y(D,"div",{innerHTML:t,className:"tip"});setTimeout(()=>{i.addClass("hide"),setTimeout(()=>{D.removeChild(i)},300)},3e3)},K=()=>{L.auto_scroll&&g.set(S,String(z.y))},Z=t=>{let i=window.location.hash,c=null;if(q){g.del(S);return}i?c=C(decodeURI(i)):c=L.auto_scroll?parseInt(g.get(S)):0,c&&(E(c),H(1)),t&&i&&!q&&(E(c),H(1))},ee=(t,i)=>{navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(t).then(()=>{i&&i(!0)},()=>{i&&i(!1)}):(console.error("Too old browser, clipborad API not supported."),i&&i(!1))};k(),k();var B=()=>{let t;C.each("div.tab",i=>{if(i.getAttribute("data-ready"))return;let c=i.getAttribute("data-id"),p=i.getAttribute("data-title"),l=C("#"+c);l?t=!1:(l=document.createElement("div"),l.className="tabs",l.id=c,l.innerHTML='<div class="show-btn"></div>',l.child(".show-btn").addEventListener("click",()=>{E(l)}),i.parentNode.insertBefore(l,i),t=!0);let m=l.child(".nav ul");m||(m=y(l,"div",{className:"nav",innerHTML:"<ul></ul>"}).child("ul"));let s=y(m,"li",{innerHTML:p});t&&(s.addClass("active"),i.addClass("active")),s.addEventListener("click",o=>{let f=o.currentTarget;l.find(".active").forEach(b=>{b.removeClass("active")}),i.addClass("active"),f.addClass("active")}),l.appendChild(i),i.setAttribute("data-ready",String(!0))})},N=null,I=/mobile/i.test(window.navigator.userAgent),te=(t,i)=>{let c={el:{},create(){t.player.options.btns&&t.player.options.btns.forEach(e=>{c.el[e]||(c.el[e]=y(t,"div",{className:e+" btn",onclick(r){t.player.fetch().then(()=>{t.player.options.events[e](r)})}}))})}},p={el:null,btns:{mode:void 0,volume:void 0},step:"next",create:()=>{if(!t.player.options.controls)return;let e=p;t.player.options.controls.forEach(r=>{if(e.btns[r])return;let a={onclick(u){e.events[r]?e.events[r](u):t.player.options.events[r](u)}};switch(r){case"volume":a.className=" "+(s.muted?"off":"on"),a.innerHTML='<div class="bar"></div>',a["on"+h.nameMap.dragStart]=e.events.volume,a.onclick=null;break;case"mode":a.className=" "+t.player.options.mode;break;default:a.className="";break}a.className=r+a.className+" btn",e.btns[r]=y(e.el,"div",a)}),e.btns.volume.bar=e.btns.volume.child(".bar")},events:{mode(e){switch(t.player.options.mode){case"loop":t.player.options.mode="random";break;case"random":t.player.options.mode="order";break;default:t.player.options.mode="loop"}p.btns.mode.className="mode "+t.player.options.mode+" btn",g.set("_PlayerMode",t.player.options.mode)},volume(e){e.preventDefault();let r=e.currentTarget,a=!1,u=d=>{d.preventDefault(),t.player.volume(p.percent(d,r)),a=!0},n=d=>{d.preventDefault(),r.removeEventListener(h.nameMap.dragEnd,n),r.removeEventListener(h.nameMap.dragMove,u),a?(t.player.muted(),t.player.volume(p.percent(d,r))):s.muted?(t.player.muted(),t.player.volume(s.volume)):(t.player.muted("muted"),p.update(0))};r.addEventListener(h.nameMap.dragMove,u),r.addEventListener(h.nameMap.dragEnd,n)},backward(e){p.step="prev",t.player.mode()},forward(e){p.step="next",t.player.mode()}},update(e){p.btns.volume.className="volume "+(!s.muted&&e>0?"on":"off")+" btn",O(p.btns.volume.bar,Math.floor(e*100)+"%")},percent(e,r){let a=((e.clientX||e.changedTouches[0].clientX)-j(r))/_(r);return a=Math.max(a,0),Math.min(a,1)}},l={el:null,bar:null,create(){let e=o.current().el;e&&(l.el&&(l.el.parentNode.removeClass("current").removeEventListener(h.nameMap.dragStart,l.drag),l.el.remove()),l.el=y(e,"div",{className:"progress"}),l.el.setAttribute("data-dtime",h.secondToTime(0)),l.bar=y(l.el,"div",{className:"bar"}),e.addClass("current"),e.addEventListener(h.nameMap.dragStart,l.drag),o.scroll())},update(e){O(l.bar,Math.floor(e*100)+"%"),l.el.setAttribute("data-ptime",h.secondToTime(e*s.duration))},seeking(e){e?l.el.addClass("seeking"):l.el.removeClass("seeking")},percent(e,r){let a=((e.clientX||e.changedTouches[0].clientX)-j(r))/_(r);return a=Math.max(a,0),Math.min(a,1)},drag(e){e.preventDefault();let r=o.current().el,a=n=>{n.preventDefault();let d=l.percent(n,r);l.update(d),A.update(d*s.duration)},u=n=>{n.preventDefault(),r.removeEventListener(h.nameMap.dragEnd,u),r.removeEventListener(h.nameMap.dragMove,a);let d=l.percent(n,r);l.update(d),t.player.seek(d*s.duration),s.disableTimeupdate=!1,l.seeking(!1)};s.disableTimeupdate=!0,l.seeking(!0),r.addEventListener(h.nameMap.dragMove,a),r.addEventListener(h.nameMap.dragEnd,u)}},m={el:null,create(){let e=o.current();m.el.innerHTML='<div class="cover"><div class="disc"><img src="'+e.cover+'" class="blur"  alt="music cover"/></div></div><div class="info"><h4 class="title">'+e.name+"</h4><span>"+e.artist+'</span><div class="lrc"></div></div>',m.el.child(".cover").addEventListener("click",t.player.options.events["play-pause"]),A.create(m.el.child(".lrc"))}},s,o={el:null,data:[],index:-1,errnum:0,add:(e,r)=>{r.forEach(a=>{a.group=e,a.name=a.name||a.title||"Meida name",a.artist=a.artist||a.author||"Anonymous",a.cover=a.cover||a.pic,a.type=a.type||"normal",o.data.push(a)})},clear(){o.data=[],o.el.innerHTML="",o.index!==-1&&(o.index=-1,t.player.fetch())},create(){let e=o.el;o.data.map((r,a)=>{if(r.el)return null;let u="list-"+t.player._id+"-"+r.group,n=C("#"+u);return n||(n=y(e,"div",{id:u,className:t.player.group?"tab":"",innerHTML:"<ol></ol>"}),t.player.group&&(n.setAttribute("data-title",t.player.options.rawList[r.group].title),n.setAttribute("data-id",t.player._id))),r.el=y(n.child("ol"),"li",{title:r.name+" - "+r.artist,innerHTML:'<span class="info"><span>'+r.name+"</span><span>"+r.artist+"</span></span>",onclick(d){let w=d.currentTarget;if(o.index===a&&l.el){s.paused?t.player.play():t.player.seek(s.duration*l.percent(d,w));return}t.player.switch(a),t.player.play()}}),r}),B()},current(){return this.data[this.index]},scroll(){let e=this.current(),r=this.el.child("li.active");r&&r.removeClass("active");let a=this.el.child(".tab.active");return a&&a.removeClass("active"),r=this.el.find(".nav li")[e.group],r&&r.addClass("active"),a=this.el.find(".tab")[e.group],a&&a.addClass("active"),E(e.el,e.el.offsetTop),this},title(){if(s.paused)return;let e=this.current();document.title="Now Playing..."+e.name+" - "+e.artist+" | "+P},error(){let e=this.current();e.el.removeClass("current").addClass("error"),e.error=!0,this.errnum++}},f={el:null,create(){this.el||(this.el=y(t,"div",{className:"player-info",innerHTML:(t.player.options.type==="audio"?'<div class="preview"></div>':"")+'<div class="controller"></div><div class="playlist"></div>'},"after"),m.el=this.el.child(".preview"),o.el=this.el.child(".playlist"),p.el=this.el.child(".controller"))},hide(){let e=this.el;e.addClass("hide"),window.setTimeout(()=>{e.removeClass("show hide")},300)}},b={type:"audio",mode:"random",btns:["play-pause","music"],controls:["mode","backward","play-pause","forward","volume"],events:{"play-pause"(e){s.paused?t.player.play():t.player.pause()},music(e){f.el.hasClass("show")?f.hide():(f.el.addClass("show"),o.scroll().title())}}},h={random(e){return Math.floor(Math.random()*e)},parse(e){let r=[];return[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+)(.html)?","tencent","song"],["y.qq.com.*album/(\\w+)(.html)?","tencent","album"],["y.qq.com.*singer/(\\w+)(.html)?","tencent","artist"],["y.qq.com.*playsquare/(\\w+)(.html)?","tencent","playlist"],["y.qq.com.*playlist/(\\w+)(.html)?","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]].forEach(a=>{let u=new RegExp(a[0]).exec(e);u!==null&&(r=[a[1],a[2],u[1]])}),r},fetch(e){let r=[];return new Promise((a,u)=>{e.forEach(n=>{let d=h.parse(n);if(d[0]){let w=JSON.stringify(d),x=g.get(w);x?(r.push(...JSON.parse(x)),a(r)):fetch(`${L.playerAPI}/meting/?server=`+d[0]+"&type="+d[1]+"&id="+d[2]+"&r="+Math.random()).then(v=>v.json()).then(v=>{g.set(w,JSON.stringify(v)),r.push(...v),a(r)}).catch(v=>{})}else r.push(n),a(r)})})},secondToTime(e){let r=d=>isNaN(d)?"00":d<10?"0"+d:""+d,a=Math.floor(e/3600),u=Math.floor((e-a*3600)/60),n=Math.floor(e-a*3600-u*60);return(a>0?[a,u,n]:[u,n]).map(r).join(":")},nameMap:{dragStart:I?"touchstart":"mousedown",dragMove:I?"touchmove":"mousemove",dragEnd:I?"touchend":"mouseup"}};s=null,t.player={_id:h.random(999999),group:!0,load(e){let r="";e&&e.length>0?this.options.rawList!==e&&(this.options.rawList=e,o.clear(),this.fetch()):(r="none",this.pause());for(let a in c.el)T(c.el[a],r);return this},fetch(){return new Promise((e,r)=>{if(o.data.length>0)e(!0);else if(this.options.rawList){let a=[];this.options.rawList.forEach((u,n)=>{a.push(new Promise((d,w)=>{let x=n,v;u.list?(this.group=!0,v=u.list):(x=0,this.group=!1,v=[u]),h.fetch(v).then(M=>{o.add(x,M),d(0)})}))}),Promise.all(a).then(()=>{e(!0)})}}).then(e=>{e&&(o.create(),p.create(),this.mode())})},mode(){let e=o.data.length;if(!e||o.errnum===e)return;let r=p.step==="next"?1:-1,a=()=>{let n=o.index+r;(n>e||n<0)&&(n=p.step==="next"?0:e-1),o.index=n},u=()=>{let n=h.random(e);o.index!==n?o.index=n:a()};switch(this.options.mode){case"random":u();break;case"order":a();break;case"loop":p.step&&a(),o.index===-1&&u();break}this.init()},switch(e){typeof e=="number"&&e!==o.index&&o.current()&&!o.current().error&&(o.index=e,this.init())},init(){let e=o.current();if(!e||e.error){this.mode();return}let r=!1;s.paused||(r=!0,this.stop()),s.setAttribute("src",e.url),s.setAttribute("title",e.name+" - "+e.artist),this.volume(g.get("_PlayerVolume")||"0.7"),this.muted(g.get("_PlayerMuted")),l.create(),this.options.type==="audio"&&m.create(),r===!0&&this.play()},play(){if(N&&N.player.pause(),o.current().error){this.mode();return}s.play().then(()=>{o.scroll()}).catch(e=>{})},pause(){s.pause(),document.title=P},stop(){s.pause(),s.currentTime=0,document.title=P},seek(e){e=Math.max(e,0),e=Math.min(e,s.duration),s.currentTime=e,l.update(e/s.duration)},muted(e){e==="muted"?(s.muted=e,g.set("_PlayerMuted",e),p.update(0)):(g.del("_PlayerMuted"),s.muted=!1,p.update(s.volume))},volume(e){isNaN(e)||(p.update(e),g.set("_PlayerVolume",e),s.volume=e)},mini(){f.hide()}};let A={el:null,data:null,index:0,create(e){let r=o.index,a=o.current().lrc,u=n=>{if(r!==o.index)return;this.data=this.parse(n);let d="";this.data.forEach((w,x)=>{d+="<p"+(x===0?' class="current"':"")+">"+w[1]+"</p>"}),this.el=y(e,"div",{className:"inner",innerHTML:d},"replace"),this.index=0};a.startsWith("http")?this.fetch(a,u):u(a)},update(e){if(this.data&&(this.index>this.data.length-1||e<this.data[this.index][0]||!this.data[this.index+1]||e>=this.data[this.index+1][0])){for(let r=0;r<this.data.length;r++)if(e>=this.data[r][0]&&(!this.data[r+1]||e<this.data[r+1][0])){this.index=r;let a=-(this.index-1);this.el.style.transform="translateY("+a+"rem)",this.el.getElementsByClassName("current")[0].removeClass("current"),this.el.getElementsByTagName("p")[r].addClass("current")}}},parse(e){if(e){e=e.replace(/([^\]^\n])\[/g,(n,d)=>d+`
[`);let r=e.split(`
`),a=[],u=r.length;for(let n=0;n<u;n++){let d=r[n].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),w=r[n].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").trim();if(d){let x=d.length;for(let v=0;v<x;v++){let M=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(d[v]),F=M[1]*60,U=parseInt(M[2]),V=M[4]?parseInt(M[4])/((M[4]+"").length===2?100:1e3):0,W=F+U+V;a.push([W,w])}}}return a=a.filter(n=>n[1]),a.sort((n,d)=>n[0]-d[0]),a}else return[]},fetch(e,r){fetch(e).then(a=>a.text()).then(a=>{r(a)}).catch(a=>{})}},R={onerror(){o.error(),t.player.mode()},ondurationchange(){s.duration!==1&&l.el.setAttribute("data-dtime",h.secondToTime(s.duration))},onloadedmetadata(){t.player.seek(0),l.el.setAttribute("data-dtime",h.secondToTime(s.duration))},onplay(){t.parentNode.addClass("playing"),$(this.getAttribute("title")),N=t},onpause(){t.parentNode.removeClass("playing"),N=null},ontimeupdate(){this.disableTimeupdate||(l.update(this.currentTime/this.duration),A.update(this.currentTime))},onended(e){t.player.mode(),t.player.play()}};return(e=>{t.player.created||(t.player.options=Object.assign(b,e),t.player.options.mode=g.get("_PlayerMode")||t.player.options.mode,c.create(),s=y(t,t.player.options.type,R),f.create(),t.parentNode.addClass(t.player.options.type),t.player.created=!0)})(i),t};k();function ae(){let t=!0;window.addEventListener("DOMContentLoaded",function(){t=!1}),document.readyState==="loading"&&window.addEventListener("load",function(){t&&(window.dispatchEvent(new Event("DOMContentLoaded")),console.log("%c \u2601\uFE0Fcloudflare patch %c running(rocket & minify)","color: white; background: #ff8c00; padding: 5px 3px;","padding: 4px;border:1px solid #ff8c00"))})}var re=(t,i,c)=>{if(c)i();else{let p=document.createElement("script");p.onload=function(l,m){(m||!p.readyState)&&(console.log("abort!"),p.onload=null,p=void 0,!m&&i&&setTimeout(i,0))},p.src=t,document.head.appendChild(p)}},le=t=>{let{text:i,parentNode:c,id:p,className:l,type:m,src:s,dataset:o}=t,f=i||t.textContent||t.innerHTML||"";c.removeChild(t);let b=document.createElement("script");p&&(b.id=p),l&&(b.className=l),m&&(b.type=m),s&&(b.src=s,b.async=!1),o.pjax!==void 0&&(b.dataset.pjax=""),f!==""&&b.appendChild(document.createTextNode(f)),c.appendChild(b)};k();var J=(t,i)=>{let c=L[t][i];return c.includes("http")?c:c.includes("gh")||c.includes("combine")?`https://cdn.jsdelivr.net/${c}`:c.includes("npm")?`https://cdn.jsdelivr.net/${c}`:`/${c}`},ie=(t,i,c)=>{LOCAL[t]&&re(J("js",t),i||function(){window[t]=!0},c||window[t])},ne=(t,i)=>{window["css"+t]||LOCAL[t]&&(y(document.head,"link",{rel:"stylesheet",href:J("css",t)}),window["css"+t]=!0)};export{G as a,E as b,g as c,$ as d,K as e,Z as f,ee as g,B as h,te as i,ae as j,le as k,ie as l,ne as m};/*! For license information please see chunk-6H4IYY4Q.js.LEGAL.txt */
